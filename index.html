<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Woodfish Counter (Web)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- React (CDN) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- Icons (Feather via CDN) -->
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    :root{
      --beige:#F5F5DC;
      --beige-dim:rgba(255,255,255,0.07);
      --accent:#8B4513;
      --ink:#4B3F38;
      --danger:#8B0000;
    }
    html,body,#root{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#000;color:#fff}
    .container{max-width:920px;margin:0 auto;padding:20px}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
    .title{display:flex;gap:12px;align-items:center}
    .title h1{font-size:28px;margin:0;text-decoration:underline}
    .nav{display:flex;gap:8px}
    .btn{cursor:pointer;border:1px solid var(--beige);background:transparent;color:var(--beige);padding:10px 14px;border-radius:10px;font-weight:600}
    .btn.primary{border-color:var(--accent);background:var(--accent);color:#fff}
    .btn.danger{border-color:var(--danger);background:var(--danger);color:#fff}
    .card{background:var(--beige-dim);border:1px solid var(--accent);border-radius:12px;padding:16px;margin-bottom:16px}
    .row{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .row + .row{margin-top:12px}
    .stack{display:flex;flex-direction:column;gap:12px}
    .label{display:flex;align-items:center;gap:10px;color:var(--beige);font-weight:600}
    .field{width:100%}
    .select, .input, .slider{width:100%;padding:10px;border-radius:10px;border:1px solid var(--beige);background:transparent;color:var(--beige)}
    .switch{transform:scale(1.1)}
    .counter{font-size:64px;font-weight:800;text-align:center;margin:16px 0}
    .counter.jitter{animation:jitter 0.4s ease-in-out infinite alternate}
    @keyframes jitter{from{transform:translateY(-1px)}to{transform:translateY(1px)}}
    .woodfish{width:220px;height:220px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #5c2d13, #2e160a);box-shadow:0 12px 30px rgba(0,0,0,.5);margin:10px auto;display:flex;align-items:center;justify-content:center;user-select:none}
    .woodfish:active{transform:scale(0.98)}
    .woodfish .hit{font-size:18px;opacity:.8}
    .section-header{display:flex;align-items:center;gap:10px;margin:8px 0}
    .muted{opacity:.8}
    .modal-wrap{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center}
    .modal{width:min(560px,92vw);background:rgba(139,0,0,0.85);border-radius:20px;padding:20px;border:1px solid rgba(255,255,255,0.15)}
    .modal h3{margin:0 0 14px}
    .modal .actions{display:flex;justify-content:flex-end;gap:10px;margin-top:16px}
    .small{font-size:12px;opacity:.9}
    .spacer{height:8px}
    .footer{opacity:.7;font-size:12px;text-align:center;margin-top:20px}
    .range{width:100%}
    .two-cols{display:grid;grid-template-columns:1fr auto;align-items:center;gap:10px}
    .icon{width:20px;height:20px;display:inline-block;vertical-align:middle}
  </style>
</head>
<body>
  <div id="root"></div>

  <script>
    const { useState, useEffect, useMemo, useRef } = React;

    /***********************
     * Minimal i18n (EN/zh-CN/zh-HK/ms)
     ***********************/
    const I18N = {
      en: {
        appTitle: "Settings",
        hit: "Hit",
        autoHit: "Auto Hit",
        stop: "Stop",
        count: "Count",
        settings: "Settings",
        back: "Back",
        bgColorLabel: "Background Color",
        languageLabel: "Language",
        soundLabel: "Sound Enabled",
        soundVolumeLabel: "Sound Volume",
        hapticsLabel: "Haptics",
        disarrayLabel: "Disarray Counter",
        showCounterLabel: "Show Counter",
        musicLabel: "Background Music",
        prayWords: "Pray Words",
        reset: "Reset to Defaults",
        frequencyLabel: "Auto-hit frequency",
        seconds: "seconds",
        subautohit: {
          neverStop: "Never Stop",
          stopAfter: "Stop After",
          stopAt: "Stop At",
          selectDateTime: "Select Date & Time",
          pickDateTime: "Pick Date & Time"
        },
        common: {
          cancel: "Cancel",
          set: "Set",
          notSet: "Not Set",
          minutes: "minutes",
          confirm: "Confirm",
          resetTitle: "Reset Settings",
          resetMsg: "Are you sure you want to reset all settings?"
        },
        musicNames: { dabeizhou: "Da Bei Zhou", guanshiyin: "Guan Shi Yin" }
      },
      "zh-CN": {
        appTitle: "è®¾ç½®",
        hit: "æ•²å‡»",
        autoHit: "è‡ªåŠ¨æ•²å‡»",
        stop: "åœæ­¢",
        count: "è®¡æ•°",
        settings: "è®¾ç½®",
        back: "è¿”å›ž",
        bgColorLabel: "èƒŒæ™¯é¢œè‰²",
        languageLabel: "è¯­è¨€",
        soundLabel: "å¼€å¯å£°éŸ³",
        soundVolumeLabel: "éŸ³é‡",
        hapticsLabel: "è§¦æ„Ÿ",
        disarrayLabel: "éšæœºæŠ–åŠ¨",
        showCounterLabel: "æ˜¾ç¤ºè®¡æ•°",
        musicLabel: "èƒŒæ™¯éŸ³ä¹",
        prayWords: "ç¥ˆæ„¿è¯",
        reset: "æ¢å¤é»˜è®¤",
        frequencyLabel: "è‡ªåŠ¨æ•²å‡»é¢‘çŽ‡",
        seconds: "ç§’",
        subautohit: {
          neverStop: "æ°¸ä¸åœæ­¢",
          stopAfter: "åœ¨â€¦åŽåœæ­¢",
          stopAt: "åœ¨æ—¶é—´ç‚¹åœæ­¢",
          selectDateTime: "é€‰æ‹©æ—¥æœŸæ—¶é—´",
          pickDateTime: "é€‰æ‹©æ—¥æœŸæ—¶é—´"
        },
        common: {
          cancel: "å–æ¶ˆ",
          set: "è®¾ç½®",
          notSet: "æœªè®¾ç½®",
          minutes: "åˆ†é’Ÿ",
          confirm: "ç¡®è®¤",
          resetTitle: "é‡ç½®è®¾ç½®",
          resetMsg: "ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®å—ï¼Ÿ"
        },
        musicNames: { dabeizhou: "å¤§æ‚²å’’", guanshiyin: "è§‚ä¸–éŸ³" }
      },
      "zh-HK": {
        appTitle: "è¨­å®š",
        hit: "æ•²æ“Š",
        autoHit: "è‡ªå‹•æ•²æ“Š",
        stop: "åœæ­¢",
        count: "è¨ˆæ•¸",
        settings: "è¨­å®š",
        back: "è¿”å›ž",
        bgColorLabel: "èƒŒæ™¯é¡è‰²",
        languageLabel: "èªžè¨€",
        soundLabel: "é–‹å•Ÿè²éŸ³",
        soundVolumeLabel: "éŸ³é‡",
        hapticsLabel: "è§¸æ„Ÿ",
        disarrayLabel: "éš¨æ©ŸæŠ–å‹•",
        showCounterLabel: "é¡¯ç¤ºè¨ˆæ•¸",
        musicLabel: "èƒŒæ™¯éŸ³æ¨‚",
        prayWords: "ç¥ˆé¡˜è©ž",
        reset: "å›žå¾©é è¨­",
        frequencyLabel: "è‡ªå‹•æ•²æ“Šé »çŽ‡",
        seconds: "ç§’",
        subautohit: {
          neverStop: "æ°¸ä¸åœæ­¢",
          stopAfter: "åœ¨â€¦å¾Œåœæ­¢",
          stopAt: "åœ¨æ™‚é–“é»žåœæ­¢",
          selectDateTime: "é¸æ“‡æ—¥æœŸæ™‚é–“",
          pickDateTime: "é¸æ“‡æ—¥æœŸæ™‚é–“"
        },
        common: {
          cancel: "å–æ¶ˆ",
          set: "è¨­å®š",
          notSet: "æœªè¨­å®š",
          minutes: "åˆ†é˜",
          confirm: "ç¢ºèª",
          resetTitle: "é‡è¨­è¨­å®š",
          resetMsg: "ä½ ç¢ºå®šè¦é‡è¨­æ‰€æœ‰è¨­å®šå—Žï¼Ÿ"
        },
        musicNames: { dabeizhou: "å¤§æ‚²å’’", guansshiyin: "è§€ä¸–éŸ³" }
      },
      ms: {
        appTitle: "Tetapan",
        hit: "Ketuk",
        autoHit: "Ketuk Auto",
        stop: "Henti",
        count: "Kiraan",
        settings: "Tetapan",
        back: "Kembali",
        bgColorLabel: "Warna Latar",
        languageLabel: "Bahasa",
        soundLabel: "Bunyi Dihidupkan",
        soundVolumeLabel: "Kelantangan",
        hapticsLabel: "Getaran",
        disarrayLabel: "Getar Rawak",
        showCounterLabel: "Papar Kiraan",
        musicLabel: "Muzik Latar",
        prayWords: "Doa",
        reset: "Tetap Semula",
        frequencyLabel: "Kekerapan Auto-ketuk",
        seconds: "saat",
        subautohit: {
          neverStop: "Jangan Henti",
          stopAfter: "Henti Selepas",
          stopAt: "Henti Pada",
          selectDateTime: "Pilih Tarikh & Masa",
          pickDateTime: "Pilih Tarikh & Masa"
        },
        common: {
          cancel: "Batal",
          set: "Tetapkan",
          notSet: "Tiada",
          minutes: "minit",
          confirm: "Sahkan",
          resetTitle: "Tetap Semula",
          resetMsg: "Pasti ingin menetapkan semula semua tetapan?"
        },
        musicNames: { dabeizhou: "Da Bei Zhou", guanshiyin: "Guan Shi Yin" }
      }
    };

    const tFactory = (lang) => (path) => {
      const parts = path.split('.');
      let ref = I18N[lang] || I18N.en;
      for (const p of parts) ref = (ref||{})[p];
      return ref || I18N.en[path] || path;
    };

    /***********************
     * Data & storage
     ***********************/
    const STORAGE_KEY = '@user_settings';

    const defaultSettings = {
      bgColor: '#000000',
      language: 'en',
      soundEnabled: true,
      hapticsEnabled: true,
      frequency: 1,
      disarrayEnabled: false,
      showCounter: true,
      selectedMusic: 'dabeizhou.mp3',
      prayWords: '',
      soundVolume: 1,
      stopDuration: 0,
      stopTimestamp: null
    };

    function loadSettings(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        const parsed = raw ? JSON.parse(raw) : {};
        return { ...defaultSettings, ...parsed };
      }catch(e){
        console.warn('Failed to load settings', e);
        return { ...defaultSettings };
      }
    }

    function saveSettings(patch){
      const current = loadSettings();
      const merged = { ...current, ...patch };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(merged));
      return merged;
    }

    /***********************
     * Simple event bus
     ***********************/
    const bus = new EventTarget();
    const emit = (name, detail) => bus.dispatchEvent(new CustomEvent(name,{detail}));

    /***********************
     * Music tracks (replace URLs if desired)
     ***********************/
    const MUSIC_TRACKS = {
      "dabeizhou.mp3": {
        nameKey: "musicNames.dabeizhou",
        url: "https://cdn.pixabay.com/download/audio/2022/03/15/audio_8e711a5f6d.mp3?filename=calm-meditation-110241.mp3"
      },
      "guanshiyin.mp3": {
        nameKey: "musicNames.guanshiyin",
        url: "https://cdn.pixabay.com/download/audio/2021/09/27/audio_6c50ccaa2a.mp3?filename=relaxing-meditation-10971.mp3"
      }
    };

    /***********************
     * Components
     ***********************/
    function TopBar({ t, onGoSettings, onGoHome, showBack }){
      useEffect(()=>{feather.replace()},[]);
      return (
        React.createElement('div', {className:'topbar'},
          React.createElement('div',{className:'title'},
            React.createElement('i', { 'data-feather':'settings', className:'icon'}),
            React.createElement('h1', null, t('appTitle'))
          ),
          React.createElement('div',{className:'nav'},
            showBack
              ? React.createElement('button',{className:'btn',onClick:onGoHome}, t('back'))
              : React.createElement('button',{className:'btn',onClick:onGoSettings}, t('settings'))
          )
        )
      );
    }

    function SettingsScreen({ t, settings, updateSettings, openAutoHit }){
      const [showReset, setShowReset] = useState(false);

      useEffect(()=>{
        document.body.style.background = settings.bgColor;
      },[settings.bgColor]);

      const set = (patch) => {
        const merged = saveSettings(patch);
        updateSettings(merged);
        emit('settingsChanged', merged);
      };

      const musicOptions = Object.keys(MUSIC_TRACKS).map(v => ({ value:v, label: t(MUSIC_TRACKS[v].nameKey) || v }));

      return (
        React.createElement('div',{className:'container'},
          React.createElement(TopBar, { t, onGoSettings:()=>{}, onGoHome:()=>openAutoHit(false), showBack:true }),
          React.createElement('div',{className:'card stack'},
            React.createElement('div',{className:'section-header'},
              React.createElement('i',{'data-feather':'droplet',className:'icon'}), 
              React.createElement('div',{className:'label'}, t('bgColorLabel'))
            ),
            React.createElement('input',{
              className:'input', type:'color', value:settings.bgColor,
              onChange:e=>set({bgColor:e.target.value})
            })
          ),

          React.createElement('div',{className:'card stack'},
            React.createElement('div',{className:'section-header'},
              React.createElement('i',{'data-feather':'globe',className:'icon'}), 
              React.createElement('div',{className:'label'}, t('languageLabel'))
            ),
            React.createElement('select',{
              className:'select', value:settings.language,
              onChange:e=>set({language:e.target.value})
            }, 
              React.createElement('option',{value:'en'},'English'),
              React.createElement('option',{value:'zh-CN'},'ç®€ä½“ä¸­æ–‡'),
              React.createElement('option',{value:'zh-HK'},'ç¹é«”ä¸­æ–‡'),
              React.createElement('option',{value:'ms'},'Bahasa Melayu')
            )
          ),

          React.createElement('div',{className:'card stack'},
            React.createElement('div',{className:'row'},
              React.createElement('div',{className:'label'},
                React.createElement('i',{'data-feather':'volume-2',className:'icon'}),
                t('soundLabel')
              ),
              React.createElement('input',{
                type:'checkbox', className:'switch',
                checked:settings.soundEnabled,
                onChange:e=>set({soundEnabled:e.target.checked})
              })
            ),
            settings.soundEnabled && React.createElement(React.Fragment,null,
              React.createElement('div',{className:'row'},
                React.createElement('div',{className:'label'},
                  React.createElement('i',{'data-feather':'sliders',className:'icon'}),
                  t('soundVolumeLabel')
                ),
              ),
              React.createElement('input',{
                className:'range', type:'range', min:0, max:1, step:0.05, value:settings.soundVolume,
                onChange:e=>set({soundVolume: Number(e.target.value)})
              })
            )
          ),

          React.createElement('div',{className:'card stack'},
            React.createElement('div',{className:'section-header'},
              React.createElement('i',{'data-feather':'music',className:'icon'}), 
              React.createElement('div',{className:'label'}, t('musicLabel'))
            ),
            React.createElement('select',{
              className:'select', value:settings.selectedMusic,
              onChange:e=>set({selectedMusic:e.target.value})
            }, musicOptions.map(o=>React.createElement('option',{key:o.value,value:o.value},o.label)))
          ),

          React.createElement('div',{className:'card stack'},
            React.createElement('div',{className:'row'},
              React.createElement('div',{className:'label'},
                React.createElement('i',{'data-feather':'activity',className:'icon'}),
                t('hapticsLabel')
              ),
              React.createElement('input',{
                type:'checkbox', className:'switch',
                checked:settings.hapticsEnabled,
                onChange:e=>set({hapticsEnabled:e.target.checked})
              })
            ),
            React.createElement('div',{className:'row'},
              React.createElement('div',{className:'label'},
                React.createElement('i',{'data-feather':'shuffle',className:'icon'}),
                t('disarrayLabel')
              ),
              React.createElement('input',{
                type:'checkbox', className:'switch',
                checked:settings.disarrayEnabled,
                onChange:e=>set({disarrayEnabled:e.target.checked})
              })
            ),
            React.createElement('div',{className:'row'},
              React.createElement('div',{className:'label'},
                React.createElement('i',{'data-feather':'hash',className:'icon'}),
                t('showCounterLabel')
              ),
              React.createElement('input',{
                type:'checkbox', className:'switch',
                checked:settings.showCounter,
                onChange:e=>set({showCounter:e.target.checked})
              })
            ),
            React.createElement('div',{className:'stack'},
              React.createElement('div',{className:'label'},
                React.createElement('i',{'data-feather':'edit-3',className:'icon'}),
                t('prayWords')
              ),
              React.createElement('input',{
                className:'input',
                placeholder:t('prayWords'),
                value:settings.prayWords,
                onChange:e=>set({prayWords:e.target.value})
              })
            ),
            React.createElement('button',{className:'btn danger', onClick:()=>setShowReset(true)}, t('reset'))
          ),

          React.createElement('div',{className:'card stack'},
            React.createElement('div',{className:'row'},
              React.createElement('div',{className:'label'},
                React.createElement('i',{'data-feather':'clock',className:'icon'}),
                `${t('frequencyLabel')} (${settings.frequency} ${t('seconds')})`
              )
            ),
            React.createElement('input',{
              className:'range', type:'range', min:1, max:5, step:1, value:settings.frequency,
              onChange:e=>set({frequency:Number(e.target.value)})
            }),
            React.createElement('div',{className:'row'},
              React.createElement('div',{className:'label'}, t('subautohit.neverStop')),
              React.createElement('input',{
                type:'checkbox', className:'switch',
                checked:settings.stopDuration===0 && settings.stopTimestamp===null,
                onChange:e=>{
                  if (e.target.checked){
                    set({ stopDuration:0, stopTimestamp:null });
                  }
                }
              })
            ),
            React.createElement('div',{className:'two-cols'},
              React.createElement('div',{className:'label'}, `${t('subautohit.stopAfter')}: ${settings.stopDuration} ${t('common.minutes')}`),
              React.createElement('div',null,
                React.createElement('button',{className:'btn',onClick:()=>set({ stopDuration: Math.max(1, (settings.stopDuration||0)-1), stopTimestamp:null })}, '-'),
                ' ',
                React.createElement('button',{className:'btn',onClick:()=>set({ stopDuration: Math.min(60, (settings.stopDuration||0)+1), stopTimestamp:null })}, '+')
              )
            ),
            React.createElement('div',{className:'two-cols'},
              React.createElement('div',{className:'label'}, `${t('subautohit.stopAt')}: ${settings.stopTimestamp? new Date(settings.stopTimestamp).toLocaleString() : t('common.notSet')}`),
              React.createElement('button',{
                className:'btn', onClick:()=>{
                  const current = new Date().toISOString().slice(0,16);
                  const input = prompt(`${t('subautohit.selectDateTime')} (YYYY-MM-DDTHH:MM)`, current);
                  if (!input) return;
                  const ts = new Date(input).getTime();
                  if (!isNaN(ts)){
                    set({ stopTimestamp: ts, stopDuration:0 });
                  }else{
                    alert('Invalid date/time format.');
                  }
                }
              }, t('subautohit.selectDateTime'))
            )
          ),

          showReset && React.createElement(ResetModal,{t, onCancel:()=>setShowReset(false), onConfirm:()=>{
            const merged = { ...defaultSettings };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(merged));
            updateSettings(merged);
            emit('settingsChanged', merged);
            setShowReset(false);
          }})
        )
      );
    }

    function ResetModal({ t, onCancel, onConfirm }){
      return (
        React.createElement('div',{className:'modal-wrap'},
          React.createElement('div',{className:'modal'},
            React.createElement('h3',null, t('common.resetTitle')),
            React.createElement('p',null, t('common.resetMsg')),
            React.createElement('div',{className:'actions'},
              React.createElement('button',{className:'btn',onClick:onCancel}, t('common.cancel')),
              React.createElement('button',{className:'btn primary',onClick:onConfirm}, t('common.confirm'))
            )
          )
        )
      );
    }

    function useAudioPlayer({ url, enabled, volume }){
      const audioRef = useRef(null);
      useEffect(()=>{
        if (!url) return;
        if (!audioRef.current){
          const a = new Audio(url);
          a.loop = true;
          audioRef.current = a;
        } else {
          audioRef.current.src = url;
        }
      },[url]);

      useEffect(()=>{
        if (!audioRef.current) return;
        audioRef.current.volume = Math.max(0,Math.min(1, volume ?? 1));
      },[volume]);

      useEffect(()=>{
        const a = audioRef.current;
        if (!a) return;
        if (enabled){
          a.play().catch(()=>{/* user gesture may be needed first */});
        } else {
          a.pause();
          a.currentTime = 0;
        }
      },[enabled, url]);

      return {
        play: ()=>audioRef.current && audioRef.current.play(),
        pause: ()=>audioRef.current && audioRef.current.pause(),
        el: audioRef
      };
    }

    function HomeScreen({ t, settings, updateSettings, openSettings }){
      const [count, setCount] = useState(Number(localStorage.getItem('count')||0));
      const [auto, setAuto] = useState(false);
      const timerRef = useRef(null);
      const targetStopAtRef = useRef(null);
      const startTimeRef = useRef(null);

      const musicUrl = MUSIC_TRACKS[settings.selectedMusic]?.url;
      const player = useAudioPlayer({ url: musicUrl, enabled: settings.soundEnabled && auto, volume: settings.soundVolume });

      useEffect(()=>{
        document.body.style.background = settings.bgColor;
      },[settings.bgColor]);

      useEffect(()=>{
        const onChanged = (e)=>{ updateSettings(e.detail); };
        bus.addEventListener('settingsChanged', onChanged);
        return ()=>bus.removeEventListener('settingsChanged', onChanged);
      },[updateSettings]);

      const vibrate = (ms=40)=>{ if (settings.hapticsEnabled && navigator.vibrate) navigator.vibrate(ms); };

      const hit = ()=>{
        setCount(c=>{
          const next = c+1;
          localStorage.setItem('count', String(next));
          return next;
        });
        vibrate();
      };

      const shouldStop = ()=>{
        if (settings.stopDuration && settings.stopDuration > 0 && startTimeRef.current){
          const elapsedMin = (Date.now() - startTimeRef.current)/60000;
          if (elapsedMin >= settings.stopDuration) return true;
        }
        if (settings.stopTimestamp){
          if (Date.now() >= settings.stopTimestamp) return true;
        }
        return false;
      };

      const startAuto = ()=>{
        if (auto) return;
        startTimeRef.current = Date.now();
        targetStopAtRef.current = settings.stopTimestamp || null;
        setAuto(true);
      };
      const stopAuto = ()=>{
        setAuto(false);
        if (timerRef.current){ clearInterval(timerRef.current); timerRef.current = null; }
      };

      useEffect(()=>{
        if (!auto){
          if (timerRef.current){ clearInterval(timerRef.current); timerRef.current = null; }
          player.pause();
          return;
        }

        // kick immediately
        hit();
        if (settings.soundEnabled) player.play();

        timerRef.current = setInterval(()=>{
          if (shouldStop()){
            stopAuto();
            return;
          }
          hit();
        }, Math.max(1, settings.frequency) * 1000);

        return ()=>{ if (timerRef.current){ clearInterval(timerRef.current); timerRef.current = null; } };
      },[auto, settings.frequency, settings.stopDuration, settings.stopTimestamp, settings.soundEnabled]);

      const counterClass = 'counter' + (settings.disarrayEnabled ? ' jitter' : '');
      const musicName = MUSIC_TRACKS[settings.selectedMusic] ? MUSIC_TRACKS[settings.selectedMusic].nameKey : '';

      return (
        React.createElement('div',{className:'container'},
          React.createElement(TopBar,{ t, onGoSettings: openSettings, onGoHome:()=>{}, showBack:false }),
          settings.prayWords && React.createElement('div',{className:'card'}, React.createElement('div',{className:'muted'}, settings.prayWords)),
          settings.showCounter && React.createElement('div',{className:counterClass}, `${t('count')}: ${count}`),
          React.createElement('div',{className:'woodfish', onClick:()=>hit()},
            React.createElement('div',{className:'hit'}, t('hit'))
          ),
          React.createElement('div',{className:'row', style:{justifyContent:'center', gap:12, marginTop:12}},
            !auto
              ? React.createElement('button',{className:'btn primary', onClick:startAuto}, t('autoHit'))
              : React.createElement('button',{className:'btn danger', onClick:stopAuto}, t('stop')),
            React.createElement('button',{className:'btn', onClick:openSettings}, t('settings'))
          ),
          React.createElement('div',{className:'card'},
            React.createElement('div',{className:'row'},
              React.createElement('div',{className:'muted small'}, `${t('musicLabel')}: ${t(musicName) || settings.selectedMusic}`),
              React.createElement('div',{className:'muted small'}, `${t('soundVolumeLabel')}: ${Math.round(settings.soundVolume*100)}%`)
            ),
            React.createElement('div',{className:'muted small'}, settings.soundEnabled ? 'ðŸŽµ ON' : 'ðŸ”‡ OFF')
          ),
          React.createElement('div',{className:'footer'}, 'Woodfish Web â€¢ Single-file demo')
        )
      );
    }

    function App(){
      const [settings, setSettings] = useState(loadSettings());
      const t = useMemo(()=>tFactory(settings.language),[settings.language]);
      const [screen, setScreen] = useState('home');

      const openSettings = ()=>setScreen('settings');
      const openHome = ()=>setScreen('home');

      useEffect(()=>{feather.replace()},[screen, settings.language]);

      if (screen === 'settings'){
        return React.createElement(SettingsScreen, {
          t, settings,
          updateSettings: setSettings,
          openAutoHit: ()=>setScreen('home')
        });
      }

      return React.createElement(HomeScreen, {
        t, settings,
        updateSettings: setSettings,
        openSettings
      });
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>
